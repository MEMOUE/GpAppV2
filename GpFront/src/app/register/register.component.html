<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-xl shadow-2xl p-8">
      <!-- En-tête -->
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-2">
          {{ 'registration.title' | translate }}
        </h2>
        <p class="text-gray-600">
          {{ 'registration.subtitle' | translate }}
        </p>
      </div>

      <!-- Formulaire principal -->
      <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Champ Username -->
        <div>
          <label for="username" class="block text-sm font-semibold text-gray-700 mb-2">
            {{ 'registration.username' | translate }}
          </label>
          <input
            pInputText
            id="username"
            formControlName="username"
            [placeholder]="'registration.placeholders.username' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
            [ngClass]="{
              'border-red-500 focus:ring-red-500': registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched
            }"
          />
          <small
            *ngIf="registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched"
            class="block mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage('username') }}
          </small>
        </div>

        <!-- Champ Password -->
        <div>
          <label for="password" class="block text-sm font-semibold text-gray-700 mb-2">
            {{ 'registration.password' | translate }}
          </label>
          <input
            pInputText
            id="password"
            type="password"
            formControlName="password"
            [placeholder]="'registration.placeholders.password' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
            [ngClass]="{
              'border-red-500 focus:ring-red-500': registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched
            }"
          />
          <small
            *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched"
            class="block mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage('password') }}
          </small>
        </div>

        <!-- Champ Confirm Password -->
        <div>
          <label for="confirmPassword" class="block text-sm font-semibold text-gray-700 mb-2">
            {{ 'registration.confirmPassword' | translate }}
          </label>
          <input
            pInputText
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            [placeholder]="'registration.placeholders.confirmPassword' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
            [ngClass]="{
              'border-red-500 focus:ring-red-500': registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched
            }"
          />
          <small
            *ngIf="registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched"
            class="block mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage('confirmPassword') }}
          </small>
        </div>

        <!-- Champ Email -->
        <div>
          <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
            {{ 'registration.email' | translate }}
          </label>
          <input
            pInputText
            id="email"
            type="email"
            formControlName="email"
            [placeholder]="'registration.placeholders.email' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
            [ngClass]="{
              'border-red-500 focus:ring-red-500': registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched
            }"
          />
          <small
            *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched"
            class="block mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage('email') }}
          </small>
        </div>

        <!-- Checkbox Agent GP -->
        <div class="flex items-center space-x-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
          <p-checkbox
            id="isAgentGp"
            formControlName="isAgentGp"
            [binary]="true"
            styleClass="mr-2"
          ></p-checkbox>
          <label for="isAgentGp" class="text-sm font-semibold text-gray-700 cursor-pointer">
            {{ 'registration.isAgentGp' | translate }}
          </label>
        </div>

        <!-- Champs supplémentaires pour les agents GP -->
        <div
          *ngIf="registrationForm.get('isAgentGp')?.value"
          class="bg-blue-50 border-l-4 border-blue-500 rounded-r-lg p-6 space-y-6 animate-fade-in"
        >
          <!-- En-tête section agent -->
          <div class="border-b border-blue-200 pb-4 mb-4">
            <h4 class="text-lg font-bold text-gray-800 mb-1">
              {{ 'registration.agentInfo' | translate }}
            </h4>
            <p class="text-sm text-gray-600">
              {{ 'registration.agentInfoDescription' | translate }}
            </p>
          </div>

          <!-- Champ Nom Agence -->
          <div>
            <label for="nomagence" class="block text-sm font-semibold text-gray-700 mb-2">
              {{ 'registration.nomagence' | translate }}
            </label>
            <input
              pInputText
              id="nomagence"
              formControlName="nomagence"
              [placeholder]="'registration.placeholders.nomagence' | translate"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
              [ngClass]="{
                'border-red-500 focus:ring-red-500': registrationForm.get('nomagence')?.invalid && registrationForm.get('nomagence')?.touched
              }"
            />
            <small
              *ngIf="registrationForm.get('nomagence')?.invalid && registrationForm.get('nomagence')?.touched"
              class="block mt-1 text-sm text-red-600"
            >
              {{ getErrorMessage('nomagence') }}
            </small>
          </div>

          <!-- Champ Adresse -->
          <div>
            <label for="adresse" class="block text-sm font-semibold text-gray-700 mb-2">
              {{ 'registration.adresse' | translate }}
            </label>
            <input
              pInputText
              id="adresse"
              formControlName="adresse"
              [placeholder]="'registration.placeholders.adresse' | translate"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
              [ngClass]="{
                'border-red-500 focus:ring-red-500': registrationForm.get('adresse')?.invalid && registrationForm.get('adresse')?.touched
              }"
            />
            <small
              *ngIf="registrationForm.get('adresse')?.invalid && registrationForm.get('adresse')?.touched"
              class="block mt-1 text-sm text-red-600"
            >
              {{ getErrorMessage('adresse') }}
            </small>
          </div>

          <!-- Champ Téléphone -->
          <div>
            <label for="telephone" class="block text-sm font-semibold text-gray-700 mb-2">
              {{ 'registration.telephone' | translate }}
            </label>
            <input
              pInputText
              id="telephone"
              formControlName="telephone"
              [placeholder]="'registration.placeholders.telephone' | translate"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
              [ngClass]="{
                'border-red-500 focus:ring-red-500': registrationForm.get('telephone')?.invalid && registrationForm.get('telephone')?.touched
              }"
            />
            <small
              *ngIf="registrationForm.get('telephone')?.invalid && registrationForm.get('telephone')?.touched"
              class="block mt-1 text-sm text-red-600"
            >
              {{ getErrorMessage('telephone') }}
            </small>
          </div>

          <!-- Champ Destinations -->
          <div>
            <label for="destinations" class="block text-sm font-semibold text-gray-700 mb-2">
              {{ 'registration.destinations' | translate }}
            </label>
            <input
              pInputText
              id="destinations"
              formControlName="destinations"
              [placeholder]="'registration.placeholders.destinations' | translate"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
            />
            <small class="block mt-1 text-sm text-gray-500">
              Exemple: Paris, Lyon, Marseille
            </small>
          </div>

          <!-- Upload Logo -->
          <div>
            <label for="logo" class="block text-sm font-semibold text-gray-700 mb-2">
              Logo de l'agence <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input
                type="file"
                id="logo"
                accept="image/*"
                (change)="onFileSelected('logo', $event)"
                class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer border border-gray-300 rounded-lg transition duration-200"
              />
            </div>
            <small class="block mt-1 text-sm text-gray-500">
              Formats acceptés: JPG, PNG, GIF (max 5MB)
            </small>
            <div
              *ngIf="selectedFiles['logo']"
              class="mt-2 flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg"
            >
              <div class="flex items-center">
                <i class="pi pi-check-circle text-green-600 mr-2"></i>
                <span class="text-sm text-green-700">{{ selectedFiles['logo'].name }}</span>
              </div>
              <button
                type="button"
                (click)="removeFile('logo')"
                class="text-red-600 hover:text-red-800 font-bold text-lg transition duration-200"
              >
                ×
              </button>
            </div>
            <small
              *ngIf="fileErrors['logo']"
              class="block mt-1 text-sm text-red-600"
            >
              {{ fileErrors['logo'] }}
            </small>
          </div>

          <!-- Upload Carte d'identité -->
          <div>
            <label for="carteIdentite" class="block text-sm font-semibold text-gray-700 mb-2">
              Carte d'identité <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input
                type="file"
                id="carteIdentite"
                accept="image/*"
                (change)="onFileSelected('carteIdentite', $event)"
                class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer border border-gray-300 rounded-lg transition duration-200"
              />
            </div>
            <small class="block mt-1 text-sm text-gray-500">
              Formats acceptés: JPG, PNG, GIF (max 5MB)
            </small>
            <div
              *ngIf="selectedFiles['carteIdentite']"
              class="mt-2 flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg"
            >
              <div class="flex items-center">
                <i class="pi pi-check-circle text-green-600 mr-2"></i>
                <span class="text-sm text-green-700">{{ selectedFiles['carteIdentite'].name }}</span>
              </div>
              <button
                type="button"
                (click)="removeFile('carteIdentite')"
                class="text-red-600 hover:text-red-800 font-bold text-lg transition duration-200"
              >
                ×
              </button>
            </div>
            <small
              *ngIf="fileErrors['carteIdentite']"
              class="block mt-1 text-sm text-red-600"
            >
              {{ fileErrors['carteIdentite'] }}
            </small>
          </div>
        </div>

        <!-- Messages de succès et d'erreur -->
        <div
          *ngIf="successMessage"
          class="p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg"
        >
          <div class="flex items-center">
            <i class="pi pi-check-circle text-green-500 mr-3 text-xl"></i>
            <p class="text-sm text-green-700 font-medium">{{ successMessage }}</p>
          </div>
        </div>

        <div
          *ngIf="errorMessage"
          class="p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg"
        >
          <div class="flex items-center">
            <i class="pi pi-exclamation-circle text-red-500 mr-3 text-xl"></i>
            <p class="text-sm text-red-700 font-medium">{{ errorMessage }}</p>
          </div>
        </div>

        <!-- Bouton de soumission -->
        <div class="pt-4">
          <p-button
            [label]="'registration.submitButton' | translate"
            icon="pi pi-check"
            type="submit"
            [disabled]="!canSubmit()"
            class="w-full"
            styleClass="w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition duration-200 font-semibold"
          ></p-button>
        </div>
      </form>

      <!-- Séparateur -->
      <div class="relative my-8">
        <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-gray-300"></div>
        </div>
        <div class="relative flex justify-center text-sm">
          <span class="px-2 bg-white text-gray-500">
            {{ 'registration.or' | translate }}
          </span>
        </div>
      </div>

      <!-- Lien vers la connexion -->
      <div class="text-center">
        <span class="text-sm text-gray-600">
          {{ 'registe.alreadyHaveAccount' | translate }}
        </span>
        <a
          href="/login"
          class="ml-1 text-sm font-semibold text-blue-600 hover:text-blue-800 hover:underline transition duration-200"
        >
          {{ 'registe.signIn' | translate }}
        </a>
      </div>
    </div>
  </div>
</div>
